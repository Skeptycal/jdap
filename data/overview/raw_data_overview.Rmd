---
title: "Overview of responses to questions with multiple non-exclusive options"
output:
  html_document:
    fig_caption: yes
    keep_md: yes
    number_sections: yes
    toc: yes
  md_document:
    variant: markdown_github
  pdf_document:
    fig_caption: yes
    number_sections: yes
    toc: yes
  word_document:
    fig_caption: yes
---


```{r setup, echo=FALSE, include=TRUE}
suppressPackageStartupMessages({
  require(plyr)
  require(dplyr)
  require(knitr)
  require(RColorBrewer)
  require(knitr)
  #require(kfigr)
  opts_chunk$set(message=FALSE, warning=FALSE)
})
#knit_hooks$set(plot = function(x, options) {
#   paste('<figure><img src="',
#         opts_knit$get('base.url'), paste(x, collapse = '.'),
#         '"><figcaption>', options$fig.cap, '</figcaption></figure>',
#         sep = '')
#})

#knit_hooks$set(plot = function(x, options) {
#   paste0('<figure><img src="',opts_knit$get('base.url'), paste(x, collapse = '.'),'">',
#          '<figcaption>', options$fig.cap, '</figcaption></figure>')
#})

```

# Load data

```{r, cache=TRUE, message=FALSE, echo=FALSE}

library(plyr)
library(dplyr)
library(zoo)
library(ggplot2)
library(assertthat)
source("./src/aux_functions.R")


d <- read.csv("../raw_data/JDAP_Survey_Data.csv", header=T, fill=TRUE, fileEncoding="UTF-8", as.is=T)
key <- d[1,]
d <- d[-1,]
colnames(d)[1:6] <- as.character(key[1:6])

cross_tab_responses <- function(d, cnames) {
  x <- d[,cnames]
  new_cnames <- apply(x, 2, function(x) unique(x[x!=""])) 
  colnames(x) <- new_cnames #%>% gsub(" ", "\n", .)
  x <- x!=""
  
  res <- apply(x, 2, function(c1) apply(x, 2, function(c2) sum(c1&c2) ))
  res[lower.tri(res)] <- NA
  # diag(res) <- NA
  
  # colnames(res) <- new_cnames %>% gsub(" ", " ", .) %>% sprintf("\"%s\"", .)
  
  res
}

```

```{r, message=FALSE, eval=TRUE, echo=FALSE}
options(digits=2)

```


# Question 5

<!-- Field: Q11-->
5. To your knowledge, what are the policies of these stakeholders as they apply to online public archiving of the datasets associated with your (month) (year) publication in (journal)? Choose all that apply
  a.  The journal  <!-- Field: Q11_1 -->
	b.  Your funder(s)  <!-- Field: Q11_2 -->
	c.  Your employer or institution  <!-- Field: Q11_3 -->
  

```{r, fig.width=10, fig.height=5, echo=FALSE}

library(plyr)
library(dplyr)
library(knitr)
library(pander)

cross_tab_responses(d, paste0('Q11_1_',1:6)) %>% kable

cross_tab_responses(d, paste0('Q11_2_',1:6)) %>% kable

cross_tab_responses(d, paste0('Q11_3_',1:6)) %>% kable

```


# Question 6

<!-- Field: Q12 -->
6. Are all datasets associated with your (month) (year) publication in (journal) publicly available online?
  a.  ALL datasets are publicly available online   <!-- Field: Q12_1 -->
	b.  SOME but not all of the datasets are publicly available online   <!-- Field: Q12_2 -->
	c.  NONE of the datasets are publicly available online   <!-- Field: Q12_3 -->
	d.  I don't know   <!-- Field: Q12_4 -->
	e.  We did not collect any data for that publication   <!-- Field: Q12_5 -->
	f. Other (please specify)   <!-- Field: Q12_6/Q12_6_TEXT -->
  

```{r, fig.width=10, fig.height=5, echo=FALSE}

library(plyr)
library(dplyr)
library(knitr)

cross_tab_responses(d, paste0('Q12_',1:6)) %>% kable

```



# Question 7

<!-- Field: Q13 -->
7. IF ALL or SOME datasets associated with this paper are publicly available, where are the datasets hosted?
  a.  Journal supplementary information   <!-- Field: Q13_1 -->
	b.  A repository for data or research output   <!-- Field: Q13_2 -->
	c.  A personal or lab website   <!-- Field: Q13_3 -->
	d.  The entire dataset is in the body of the paper   <!-- Field: Q13_4 -->
	e.  Other (please specify)   <!-- Field: Q13_5/Q13_5_TEXT -->
	f.  Not applicable   <!-- Field: Q13_6 -->
  

```{r, eval=FALSE, fig.width=10, fig.height=5, echo=FALSE}

# library(plyr)
# library(dplyr)
# library(knitr)
# 
# cross_tab_responses(d, paste0('Q13_',1:6)) %>% kable

```


# Question 8

<!-- Field: Q14 -->
8. If NONE or only SOME of the datasets are publicly available, which of the following reflect your experience for the dataset(s) not publicly available, for this paper? Choose all that apply.
  a.  The dataset has been submitted to a repository and is currently under embargo  <!-- Field: Q14_1 -->
	b.  We plan to publicly archive the dataset in the future  <!-- Field: Q14_2 -->
	c.  We plan to share the dataset upon request  <!-- Field: Q14_3 -->
	d.  We hadn't considered publicly archiving the dataset  <!-- Field: Q14_4 -->
	e.  We considered publicly archiving data and decided not to  <!-- Field: Q14_5 -->
	f.  We wanted to publicly archive the data but were not able to, due to resource limitations  <!-- Field: Q14_6 -->
	g.  We wanted to publicly archive the data but were not able to, for other reasons  <!-- Field: Q14_7 -->
	h.  Other (please specify)  <!-- Field: Q14_8/Q14_8_TEXT -->
	i.  Not applicable  <!-- Field: Q14_9 -->
	j.  We wanted to publicly archive the data but were not able to, due to licencing or funder restrictions  <!-- Field: Q14_10 -->
  

```{r, eval=FALSE, fig.width=10, fig.height=5, echo=FALSE}

# library(plyr)
# library(dplyr)
# library(knitr)
# 
# cross_tab_responses(d, paste0('Q14_',1:10)) %>% kable

```


# Question 8

<!-- Field: Q18 -->
10. Imagine you just found a great journal to target when submitting your next manuscript. You read the Instruction to Authors and discover the journal adheres to the Joint Data Archiving Policy (above). How strongly do you disagree/agree with the following statements? I am worried that ...
  a.  others might do research I am currently working on  <!-- Field: Q18_1 -->
	b.  others might do research I am planning to do  <!-- Field: Q18_2 -->
	c.  others might find errors in my research  <!-- Field: Q18_3  -->
	d.  others might misinterpret my dataset or use it inappropriately  <!-- Field: Q18_4 -->
	e.  I/we might be bothered with a lot of questions by qualified people  <!-- Field: Q18_5 -->
	f.  I/we might be bothered with a lot of questions by unqualified people  <!-- Field: Q18_6 -->
	g.  I/we might not be able to find the data  <!-- Field: Q18_7 -->
	h.  it might take me/us a lot of time to find the data  <!-- Field: Q18_8 -->
	i.  it might take me/us a lot of time to format or document the data  <!-- Field: Q18_9 -->
	j.  it might take me/us a lot of time to submit the data  <!-- Field:  Q18_10-->
	k.  I might lose intellectual property or commercial opportunities  <!-- Field: Q18_11 -->
	l.  Other worries (please specify)  <!-- Field: Q18_12/Q18_12_TEXT -->
   

```{r, eval=FALSE, fig.width=10, fig.height=5, echo=FALSE}

# library(plyr)
# library(dplyr)
# library(knitr)
# 
# d[,paste0('Q18_',1:3)] %>% head
# 
# 
# cross_tab_responses(d, paste0('Q18_',1:3)) %>% kable

```


# Question 11

<!-- Field: Q19 -->
11. Same instructions as the previous question: Imagine you just found a great journal to target when submitting your next manuscript. You read the Instruction to Authors and discover the journal adheres to the Joint Data Archiving Policy (above). How strongly do you disagree/agree with the following statements? I am pleased because...
  a.  others will build upon my work more easily  <!-- Field: Q19_1  -->
	b.  I will get more citations  <!-- Field: Q19_2  -->
	c.  I will form more collaborations  <!-- Field: Q19_3  -->
	d.  the contribution will be valued by my promotion or tenure committee  <!-- Field: Q19_4  -->
	c.  the contribution will be valued by my funders  <!-- Field: Q19_5  -->
	d.  I will be able to reuse other work more easily  <!-- Field: Q19_6  -->
	e.  I will be able to reuse other work more often  <!-- Field: Q19_7  -->
	f.  my scientific area will progress more quickly  <!-- Field: Q19_8  -->
	g.  my scientific area will develop better tools and/or training  <!-- Field: Q19_9  -->
	h.  I think it is the right thing to do  <!-- Field: Q19_10  -->
	i.  Other (please specify)  <!-- Field: Q19_11/Q19_11_TEXT  -->
   

```{r, eval=FALSE, fig.width=10, fig.height=5, echo=FALSE}

# library(plyr)
# library(dplyr)
# library(knitr)
# 
# cross_tab_responses(d, paste0('Q19_',1:11)) %>% kable

```

